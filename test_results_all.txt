  Determining projects to restore...
  All projects are up-to-date for restore.
  TWL.Shared -> /app/TWL.Shared/bin/Debug/net10.0/TWL.Shared.dll
  TWL.Server -> /app/TWL.Server/bin/Debug/net10.0/TWL.Server.dll
  TWL.Tests -> /app/TWL.Tests/bin/Debug/net10.0/TWL.Tests.dll
Test run for /app/TWL.Tests/bin/Debug/net10.0/TWL.Tests.dll (.NETCoreApp,Version=v10.0)
VSTest version 18.0.1 (x64)

Starting test execution, please wait...
A total of 1 test files matched the specified pattern.
[xUnit.net 00:00:03.79]     TWL.Tests.QuestFlagsTests.RepeatableQuest_ShouldAllowRestart [SKIP]
[xUnit.net 00:00:03.79]     TWL.Tests.QuestFlagsTests.FlagFlow_ShouldWork [SKIP]
[xUnit.net 00:00:03.79]     TWL.Tests.QuestFlagsTests.StartQuest_ShouldFail_WhenMissingRequiredFlag [SKIP]
  Skipped TWL.Tests.QuestFlagsTests.RepeatableQuest_ShouldAllowRestart [1 ms]
  Skipped TWL.Tests.QuestFlagsTests.FlagFlow_ShouldWork [1 ms]
  Skipped TWL.Tests.QuestFlagsTests.StartQuest_ShouldFail_WhenMissingRequiredFlag [1 ms]
[xUnit.net 00:00:04.25]     TWL.Tests.Economy.EconomyTests.PurchaseFlow_Success_And_Idempotency [FAIL]
  Failed TWL.Tests.Economy.EconomyTests.PurchaseFlow_Success_And_Idempotency [3 ms]
  Error Message:
   Assert.True() Failure
Expected: True
Actual:   False
  Stack Trace:
     at TWL.Tests.Economy.EconomyTests.PurchaseFlow_Success_And_Idempotency() in /app/TWL.Tests/Economy/EconomyTests.cs:line 22
   at System.Reflection.MethodBaseInvoker.InterpretedInvoke_Method(Object obj, IntPtr* args)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:04.56]     TWL.Tests.Skills.WaterSkillPackTests.SoothingMist_Cleanse_And_Heal [FAIL]
[xUnit.net 00:00:04.58]     TWL.Tests.PetTests.PetSystemTests.SwitchPet_ConsumesTurn_InCombat [FAIL]
  Failed TWL.Tests.Skills.WaterSkillPackTests.SoothingMist_Cleanse_And_Heal [6 ms]
  Error Message:
   Expected at least 2 targets, got 0
  Stack Trace:
     at TWL.Tests.Skills.WaterSkillPackTests.SoothingMist_Cleanse_And_Heal() in /app/TWL.Tests/Skills/WaterSkillPackTests.cs:line 142
   at System.Reflection.MethodBaseInvoker.InterpretedInvoke_Method(Object obj, IntPtr* args)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed TWL.Tests.PetTests.PetSystemTests.SwitchPet_ConsumesTurn_InCombat [1 ms]
  Error Message:
   Assert.True() Failure
Expected: True
Actual:   False
  Stack Trace:
     at TWL.Tests.PetTests.PetSystemTests.SwitchPet_ConsumesTurn_InCombat() in /app/TWL.Tests/PetTests/PetSystemTests.cs:line 261
   at System.Reflection.MethodBaseInvoker.InterpretedInvoke_Method(Object obj, IntPtr* args)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:05.18]     TWL.Tests.Server.Services.SpawnManagerTests.OnPlayerMoved_AccumulatesSteps_AndTriggersEncounter [FAIL]
  Failed TWL.Tests.Server.Services.SpawnManagerTests.OnPlayerMoved_AccumulatesSteps_AndTriggersEncounter [33 ms]
  Error Message:
   Moq.MockException :
Expected invocation on the mock once, but was 0 times: cm => cm.StartEncounter(It.IsAny<int>(), It.IsAny<List<ServerCharacter>>(), It.IsAny<int>())

Performed invocations:

   Mock<CombatManager:3> (cm):
   No invocations performed.

  Stack Trace:
     at Moq.Mock.Verify(Mock mock, LambdaExpression expression, Times times, String failMessage) in C:\projects\moq4\src\Moq\Mock.cs:line 330
   at Moq.Mock`1.Verify(Expression`1 expression, Times times) in C:\projects\moq4\src\Moq\Mock`1.cs:line 727
   at Moq.Mock`1.Verify(Expression`1 expression, Func`1 times) in C:\projects\moq4\src\Moq\Mock`1.cs:line 741
   at TWL.Tests.Server.Services.SpawnManagerTests.OnPlayerMoved_AccumulatesSteps_AndTriggersEncounter() in /app/TWL.Tests/Server/Services/SpawnManagerTests.cs:line 119
   at System.Reflection.MethodBaseInvoker.InterpretedInvoke_Method(Object obj, IntPtr* args)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:05.71]     TWL.Tests.Quests.QuestSystemTests.MutualExclusion_ShouldPreventConcurrentQuests [FAIL]
  Failed TWL.Tests.Quests.QuestSystemTests.MutualExclusion_ShouldPreventConcurrentQuests [1 ms]
  Error Message:
   Assert.True() Failure
Expected: True
Actual:   False
  Stack Trace:
     at TWL.Tests.Quests.QuestSystemTests.MutualExclusion_ShouldPreventConcurrentQuests() in /app/TWL.Tests/Quests/QuestSystemTests.cs:line 97
   at System.Reflection.MethodBaseInvoker.InterpretedInvoke_Method(Object obj, IntPtr* args)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:06.21]     TWL.Tests.Security.EconomySecurityTests.VerifyPurchase_Replay_Idempotency [FAIL]
[xUnit.net 00:00:06.25]     TWL.Tests.Security.EconomySecurityTests.VerifyPurchase_ValidReceiptSignature_Succeeds [FAIL]
  Failed TWL.Tests.Security.EconomySecurityTests.VerifyPurchase_Replay_Idempotency [2 ms]
  Error Message:
   Assert.True() Failure
Expected: True
Actual:   False
  Stack Trace:
     at TWL.Tests.Security.EconomySecurityTests.VerifyPurchase_Replay_Idempotency() in /app/TWL.Tests/Security/EconomySecurityTests.cs:line 54
   at System.Reflection.MethodBaseInvoker.InterpretedInvoke_Method(Object obj, IntPtr* args)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed TWL.Tests.Security.EconomySecurityTests.VerifyPurchase_ValidReceiptSignature_Succeeds [22 ms]
  Error Message:
   Assert.True() Failure
Expected: True
Actual:   False
  Stack Trace:
     at TWL.Tests.Security.EconomySecurityTests.VerifyPurchase_ValidReceiptSignature_Succeeds() in /app/TWL.Tests/Security/EconomySecurityTests.cs:line 38
   at System.Reflection.MethodBaseInvoker.InterpretedInvoke_Method(Object obj, IntPtr* args)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:06.28]     TWL.Tests.Benchmarks.PlayerServicePerformanceTests.Benchmark_Flush_Synchronous_Wrapper_Optimized [FAIL]
  Failed TWL.Tests.Benchmarks.PlayerServicePerformanceTests.Benchmark_Flush_Synchronous_Wrapper_Optimized [1 s]
  Error Message:
   Synchronous wrapper is not using optimization!
  Stack Trace:
     at TWL.Tests.Benchmarks.PlayerServicePerformanceTests.Benchmark_Flush_Synchronous_Wrapper_Optimized() in /app/TWL.Tests/Benchmarks/PlayerServicePerformanceTests.cs:line 48
   at System.Reflection.MethodBaseInvoker.InterpretedInvoke_Method(Object obj, IntPtr* args)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Standard Output Messages:
 [SYNC-WRAPPER] Flushed 50 sessions in 1092ms


[xUnit.net 00:00:06.28]     TWL.Tests.ContentIntegrationTests.ValidateNpcsContent [FAIL]
[xUnit.net 00:00:06.31]     TWL.Tests.ContentIntegrationTests.ValidateMonstersContent [FAIL]
  Failed TWL.Tests.ContentIntegrationTests.ValidateNpcsContent [8 ms]
  Error Message:
   Missing sprite for Capitana Maren: /app/TWL.Client/Content/Sprites/Npcs/npc_maren_64.png
  Stack Trace:
     at TWL.Tests.ContentIntegrationTests.ValidateNpcsContent() in /app/TWL.Tests/ContentIntegrationTests.cs:line 141
   at System.Reflection.MethodBaseInvoker.InterpretedInvoke_Method(Object obj, IntPtr* args)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
  Failed TWL.Tests.ContentIntegrationTests.ValidateMonstersContent [15 ms]
  Error Message:
   Monster 3001 invalid EncounterWeight
  Stack Trace:
     at TWL.Tests.ContentIntegrationTests.ValidateMonstersContent() in /app/TWL.Tests/ContentIntegrationTests.cs:line 102
   at System.Reflection.MethodBaseInvoker.InterpretedInvoke_Method(Object obj, IntPtr* args)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:06.41]     TWL.Tests.Quests.QuestBranchingAndFailureTests.BranchingFlow_VerifyMutualExclusionAndFailConditions [FAIL]
  Failed TWL.Tests.Quests.QuestBranchingAndFailureTests.BranchingFlow_VerifyMutualExclusionAndFailConditions [1 ms]
  Error Message:
   System.InvalidOperationException : Quest validation failed in /app/TWL.Tests/bin/Debug/net10.0/Content/Data/quests_branching_demo.json with 2 errors.
  Stack Trace:
     at TWL.Server.Simulation.Managers.ServerQuestManager.LoadFile(String path) in /app/TWL.Server/Simulation/Managers/ServerQuestManager.cs:line 54
   at TWL.Server.Simulation.Managers.ServerQuestManager.Load(String path) in /app/TWL.Server/Simulation/Managers/ServerQuestManager.cs:line 28
   at TWL.Tests.Quests.QuestBranchingAndFailureTests..ctor() in /app/TWL.Tests/Quests/QuestBranchingAndFailureTests.cs:line 43
   at System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean wrapExceptions)
[xUnit.net 00:00:06.53]     TWL.Tests.JungleQuestTests.VerifyJungleQuestsExistAndAreValid [SKIP]
  Skipped TWL.Tests.JungleQuestTests.VerifyJungleQuestsExistAndAreValid [1 ms]
[xUnit.net 00:00:06.76]     TWL.Tests.Economy.EconomyDoubleSpendTests.Should_Prevent_Double_Spend_When_Ledger_Is_Pending_But_Char_Processed [SKIP]
  Skipped TWL.Tests.Economy.EconomyDoubleSpendTests.Should_Prevent_Double_Spend_When_Ledger_Is_Pending_But_Char_Processed [1 ms]
[xUnit.net 00:00:07.59]     TWL.Tests.ContentValidationTests.ValidateStageUpgradeRulesIntegrity [FAIL]
  Failed TWL.Tests.ContentValidationTests.ValidateStageUpgradeRulesIntegrity [6 ms]
  Error Message:
   Skill 3010 has StageUpgradeRules but missing NextSkillId.
  Stack Trace:
     at TWL.Tests.ContentValidationTests.ValidateStageUpgradeRulesIntegrity() in /app/TWL.Tests/ContentValidationTests.cs:line 148
   at System.Reflection.MethodBaseInvoker.InterpretedInvoke_Method(Object obj, IntPtr* args)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:07.77]     TWL.Tests.Server.Domain.MonsterRulesTests.MonsterManager_Load_Throws_If_ElementNone_Without_QuestOnly_Tag [FAIL]
  Failed TWL.Tests.Server.Domain.MonsterRulesTests.MonsterManager_Load_Throws_If_ElementNone_Without_QuestOnly_Tag [4 ms]
  Error Message:
   Assert.Throws() Failure: No exception was thrown
Expected: typeof(System.IO.InvalidDataException)
  Stack Trace:
     at TWL.Tests.Server.Domain.MonsterRulesTests.MonsterManager_Load_Throws_If_ElementNone_Without_QuestOnly_Tag() in /app/TWL.Tests/Server/Domain/MonsterRulesTests.cs:line 31
   at System.Reflection.MethodBaseInvoker.InterpretedInvoke_Method(Object obj, IntPtr* args)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:08.21]     TWL.Tests.Quests.SpecialQuestTests.SpecialCategory_ShouldEnforceExclusivity [FAIL]
  Failed TWL.Tests.Quests.SpecialQuestTests.SpecialCategory_ShouldEnforceExclusivity [1 ms]
  Error Message:
   Should allow Dragon Quest B after A is finished
  Stack Trace:
     at TWL.Tests.Quests.SpecialQuestTests.SpecialCategory_ShouldEnforceExclusivity() in /app/TWL.Tests/Quests/SpecialQuestTests.cs:line 140
   at System.Reflection.MethodBaseInvoker.InterpretedInvoke_Method(Object obj, IntPtr* args)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)

Failed!  - Failed:    14, Passed:   425, Skipped:     5, Total:   444, Duration: 8 s - TWL.Tests.dll (net10.0)
