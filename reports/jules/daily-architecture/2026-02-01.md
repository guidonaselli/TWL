# Daily Architecture Report - 2026-02-01

## Summary
Focus: **Core Architecture / Determinism / Contracts**
Task: Enforce deterministic RNG in `SpawnManager` (World Loop).

## Completed Items
- **Stable Contracts**: Enhanced `IRandomService` with `NextDouble()` and `Next()`.
- **World Loop Correctness**: Refactored `SpawnManager` to use injected `IRandomService` instead of `Random.Shared`.
- **Testing**: Added deterministic test case `StartEncounter_ShouldBeDeterministic_WithSameSeed` in `SpawnManagerTests`.
- **Refactoring**: Updated `SeedableRandomService` (thread-safe implementation) and all test dependencies.

## Technical Details
- **Problem**: `SpawnManager` relied on `Random.Shared`, making encounter generation non-deterministic and hard to test.
- **Solution**: Injected `IRandomService`.
- **Value**:
    - Enables exact reproduction of bugs related to spawn rates or mob selection.
    - Prepares for "Server-side Replay" features (future).
    - Ensures that if we seed the server (e.g. for a tournament or specific instance), the world behaves identically.

## Next Steps
- Audit other domains for `Random.Shared` usage (e.g. Loot generation, AI decisions).
- Continue hardening the "Validate -> Resolve -> Persist" pipeline.
