---
phase: 09-pet-system-completion
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - Content/Data/pets.json
  - Content/Data/monsters.json
  - TWL.Tests/ContentIntegrationTests.cs
  - TWL.Tests/ContentValidationTests.cs
  - TWL.Tests/PetTests/PetRosterCoverageTests.cs
autonomous: true

must_haves:
  truths:
    - "Starter-region pet roster is complete and gameplay-usable with 20+ populated pet definitions"
    - "Starter-region capturable monsters map to valid pet definitions for normal acquisition flow"
    - "Roster quality constraints are enforced by automated content validation tests"
  artifacts:
    - path: "Content/Data/pets.json"
      provides: "Complete starter-region pet roster with progression-ready metadata"
      contains: "PetTypeId"
    - path: "Content/Data/monsters.json"
      provides: "Capturable monster to pet-type mappings for starter-region acquisition"
      contains: "PetTypeId"
    - path: "TWL.Tests/PetTests/PetRosterCoverageTests.cs"
      provides: "Roster and capture mapping integrity assertions"
      contains: "PetRosterCoverageTests"
  key_links:
    - from: "Content/Data/monsters.json"
      to: "Content/Data/pets.json"
      via: "capturable monsters reference existing pet definitions"
      pattern: "PetTypeId"
    - from: "TWL.Tests/ContentValidationTests.cs"
      to: "Content/Data/pets.json"
      via: "validation suite enforces roster data quality and progression fields"
      pattern: "LoadPets"
---

<objective>
Complete PET-02 by finalizing starter-region pet roster and capture-world linkage.

Purpose: Ensure pet content is not only numerous but also progression-ready and obtainable through gameplay.
Output: Updated pet and monster data, strengthened content validation, and roster coverage tests.
</objective>

<execution_context>
@~/.codex/get-shit-done/workflows/execute-plan.md
@~/.codex/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/09-pet-system-completion/09-RESEARCH.md

@Content/Data/pets.json
@Content/Data/monsters.json
@TWL.Tests/ContentIntegrationTests.cs
@TWL.Tests/ContentValidationTests.cs
</context>

<tasks>

<task type="auto">
  <name>Task 1: Complete starter-region pet definitions in content data</name>
  <files>
    Content/Data/pets.json
    TWL.Tests/ContentIntegrationTests.cs
  </files>
  <action>
    1. Ensure starter-region roster has 20+ pets with coherent stats, growth, and progression metadata (skill/evolution readiness where appropriate).

    2. Fill missing progression-critical fields for roster entries that are currently placeholders.

    3. Update integration tests to verify starter roster completeness expectations explicitly.
  </action>
  <verify>
    `dotnet test TWL.Tests/TWL.Tests.csproj --filter "FullyQualifiedName~ContentIntegrationTests"`
  </verify>
  <done>
    PET-02 roster completeness is encoded in content and validated by integration tests.
  </done>
</task>

<task type="auto">
  <name>Task 2: Expand capturable monster-to-pet mapping coverage</name>
  <files>
    Content/Data/monsters.json
    Content/Data/pets.json
    TWL.Tests/PetTests/PetRosterCoverageTests.cs
  </files>
  <action>
    1. Expand starter-region capturable monster entries with valid `PetTypeId` and capture threshold rules.

    2. Ensure mapping choices align with pet type/rarity balance and avoid orphaned definitions.

    3. Add tests asserting capturable monsters always map to existing valid pet definitions.
  </action>
  <verify>
    `dotnet test TWL.Tests/TWL.Tests.csproj --filter "FullyQualifiedName~PetRosterCoverageTests"`
  </verify>
  <done>
    Starter-region pet acquisition loop is content-complete and free of mapping gaps.
  </done>
</task>

<task type="auto">
  <name>Task 3: Strengthen pet content validation for progression readiness</name>
  <files>
    TWL.Tests/ContentValidationTests.cs
    Content/Data/pets.json
  </files>
  <action>
    1. Extend validation checks to assert meaningful progression metadata for starter-region pets (not only schema-level correctness).

    2. Add constraints for utility/riding/bond-related fields so invalid combinations fail fast in tests.

    3. Keep validation deterministic and actionable with precise failure messages.
  </action>
  <verify>
    `dotnet test TWL.Tests/TWL.Tests.csproj --filter "FullyQualifiedName~ContentValidationTests"`
  </verify>
  <done>
    PET content quality gates prevent incomplete roster regressions.
  </done>
</task>

</tasks>

<verification>
- [ ] Starter-region roster is 20+ and progression-ready
- [ ] Capturable monster mappings reference valid pets
- [ ] Content validation enforces roster quality
- [ ] Roster coverage and content tests pass
</verification>

<success_criteria>
- PET-02 is completed as usable gameplay content, not only raw data count
- Starter-region pet content and acquisition flow are test-protected
</success_criteria>

<output>
After completion, create `.planning/phases/09-pet-system-completion/09-02-SUMMARY.md`
</output>
