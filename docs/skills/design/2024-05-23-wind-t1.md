# Wind T1 Skills & Infrastructure Design
**Date:** 2024-05-23
**Element:** Wind
**Tier:** 1

## Overview
Implementation of Wind Tier 1 skills and core infrastructure for Counters (Seal, Dispel) and Skill Mastery.

## Skills

### 1. Wind Blade (Physical)
*   **Concept:** A swift slash of compressed air.
*   **Branch:** Physical
*   **Target:** Single Enemy
*   **Cost:** 8 SP
*   **Scaling:**
    *   ATK * 1.0
    *   SPD * 0.5 (Wind flavor: speed adds damage)
*   **Effects:**
    *   Damage (Standard)

### 2. Gale (Magical)
*   **Concept:** A sharp gust of wind that cuts the enemy.
*   **Branch:** Magical
*   **Target:** Single Enemy
*   **Cost:** 10 SP
*   **Scaling:**
    *   MAT * 1.2
*   **Effects:**
    *   Damage
    *   Chance (20%) to apply "Seal" (Small disruption) - *Actually, T1 usually doesn't seal. Let's make it just damage or minor debuff. But the prompt asks for "Seal/Control con hit rules". Let's stick to Damage for T1 Gale, or maybe "Bleed"? The Prompt asks for Seal/Cleanse/Dispel support. Let's use a "Seal" skill for testing if not Gale. Maybe "Vacuum"? But Gale is fine for now. Let's keep Gale simple Damage.*
    *   *Self-Correction:* I need to test Seal. I'll add a T2/T3 Wind skill later for Seal, or make Gale have a small chance.*
    *   Let's stick to: Gale = Damage.

### 3. Tailwind (Support)
*   **Concept:** Increases an ally's movement speed.
*   **Branch:** Support
*   **Target:** Single Ally
*   **Cost:** 15 SP
*   **Effects:**
    *   BuffStats: "Spd" +15% (Value: 10-20)
    *   Duration: 3 turns

## Infrastructure Changes

### 1. Skill Mastery & Evolution
*   **Requirement:** "Mastery por uso (rank)". "EvoluciÃ³n por hitos".
*   **Implementation:**
    *   `ServerCharacter` tracks usage count per SkillID.
    *   `Skill` definition includes `StageUpgradeRules`.
    *   **Rule:** `RankThreshold`: 10. `NextSkillId`: 101 (Example).
    *   `BattleInstance` fires `OnSkillUsed` event.
    *   Server listener increments usage. Check logic: `if (Usage > Threshold && Rule.NextId != null) UpgradeSkill()`.

### 2. Counters (Seal & Dispel)
*   **Seal (Control):**
    *   Tag: `SkillEffectTag.Seal`.
    *   Effect: Target cannot act. Sets ATB to 0.
    *   Logic: In `ResolveAction`, if `StatusEffects` contains Seal, skip turn.
    *   Application: In `ApplyDataDrivenSkill`, if tag is Seal, add StatusEffect (checking hit chance).
*   **Dispel (Utility):**
    *   Tag: `SkillEffectTag.Dispel`.
    *   Effect: Removes *positive* buffs (`BuffStats`, `Shield`, `HealOverTime`).
    *   Logic: Iterate `StatusEffects`, remove matches.
*   **Cleanse (Utility):**
    *   Already exists for specific tags. Ensure it covers `Seal`.

## Data Schema Updates
### Skill.cs
```csharp
public class Skill
{
    // ...
    public StageUpgradeRules? StageUpgradeRules { get; set; }
}

public class StageUpgradeRules
{
    public int RankThreshold { get; set; }
    public int? NextSkillId { get; set; }
}
```

### ServerCharacter.cs
```csharp
public class SkillMastery
{
    public int Rank { get; set; } = 1;
    public int UsageCount { get; set; } = 0;
}
// Property: ConcurrentDictionary<int, SkillMastery> SkillMastery
```
