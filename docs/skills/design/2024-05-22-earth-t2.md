# Earth Tier 2 Design
Date: 2024-05-22
Element: Earth
Focus: Physical Control, AoE Damage, Defensive Support (Shield)

## Overview
This package implements Tier 2 skills for the Earth element, filling the gaps in the "3 branches" structure.
- **Physical**: `Tectonic Slam` - High damage single target with Seal chance.
- **Magical**: `Earthquake` - AoE damage.
- **Support**: `Fortify` - Shielding mechanic.

## Skills

### 1. Tectonic Slam (Physical)
A heavy, ground-shaking strike that disrupts the enemy's balance and ability to act.
- **ID**: 63
- **Branch**: Physical
- **Tier**: 2
- **Target**: SingleEnemy
- **Cost**: 25 SP
- **Scaling**:
  - Atk * 1.3
  - Str * 0.5
- **Effects**:
  - `Damage`
  - `Seal`: Chance 40%, Duration 1 turn. Represents "Stun/Knockdown".

### 2. Earthquake (Magical)
Causes the ground to tremble violently, damaging multiple enemies.
- **ID**: 64
- **Branch**: Magical
- **Tier**: 2
- **Target**: RowEnemies (Simulating AoE)
- **Cost**: 40 SP
- **Cooldown**: 1 turn
- **Scaling**:
  - Mat * 1.0
- **Effects**:
  - `Damage`

### 3. Fortify (Support)
Creates a magical barrier of stone around an ally to absorb incoming damage.
- **ID**: 65
- **Branch**: Support
- **Tier**: 2
- **Target**: SingleAlly
- **Cost**: 30 SP
- **Scaling**:
  - Wis * 2.0
- **Effects**:
  - `Shield`: Value = Calculated Total (Wis*2), Duration 2 turns.

## Systemic Changes
- **Shield Logic**: `BattleInstance` needs to be updated to check for `SkillEffectTag.Shield` when applying damage.
  - Priority: Shield absorbs damage before Defense mitigation? Or after?
  - Decision: Shield absorbs *final* damage (after Defense). This makes Shields more effective on tanks (high Def) but consistent. If it absorbed raw damage, it would break too fast on low Def chars.
  - Logic: `FinalDamage = Max(1, RawDamage - Def/Mdf)`. `Absorbed = Min(FinalDamage, ShieldVal)`. `FinalDamage -= Absorbed`. `ShieldVal -= Absorbed`.

## Testing Plan
- Verify Shield absorbs damage from Skills.
- Verify Shield absorbs damage from Basic Attacks.
- Verify Shield removal when Value <= 0.
- Verify Seal application on Tectonic Slam.
